{% extends "base.html" %}

{% block title %}Situation des Clients{% endblock %}

{% block content %}
<h1 class="text-center my-4">Situation des Clients</h1>

<div class="container my-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <form method="get" action="{% url 'situation_client' %}">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" name="q" placeholder="Recherche par référence client" value="{{ query }}">
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="submit">Rechercher</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% if query %}
    {% if commandes %}
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Numéro de Dossier</th>
                        <th>Référence Client</th>
                        <th>Nom du Client</th>
                        <th>Date et Heure</th>
                        <th>Statut</th>
                    </tr>
                </thead>
                <tbody>
                    {% for commande in commandes %}
                    <tr>
                        <td>{{ commande.order_id }}</td>
                        <td>{{ commande.company_reference_number }}</td>
                        <td>{{ commande.client_name }}</td>
                        <td>{{ commande.date_time }}</td>
                        <td>{{ commande.order_status }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-danger text-center" role="alert">
            Aucun dossier trouvé pour la référence client "{{ query }}".
        </div>
    {% endif %}
{% else %}
    <div class="alert alert-info text-center" role="alert">
        Veuillez entrer une référence client pour rechercher.
    </div>
{% endif %}
{% endblock %}
